{"ast":null,"code":"import _slicedToArray from\"/Users/wdelacruz/project_2021/matx-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Badge,Button,Drawer,Icon,IconButton,ThemeProvider}from'@mui/material';import{Box,styled,useTheme}from'@mui/system';import useAuth from'app/hooks/useAuth';import useSettings from'app/hooks/useSettings';import{deleteProductFromCart,getCartList,updateCartAmount}from'app/redux/actions/EcommerceActions';import{sideNavWidth,topBarHeight}from'app/utils/constant';import{Fragment,useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{useNavigate}from'react-router-dom';import{themeShadows}from'./MatxTheme/themeColors';import{H6,Small}from'./Typography';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StyledIconButton=styled(IconButton)(function(_ref){var theme=_ref.theme;return{'& span':{color:theme.palette.text.primary},'& #disable':{color:theme.palette.text.disabled}};});var MiniCart=styled('div')(function(_ref2){var theme=_ref2.theme;return{height:'100%',display:'flex',flexDirection:'column',width:sideNavWidth};});var CartBox=styled('div')(function(){return{padding:'4px',paddingLeft:'16px',display:'flex',alignItems:'center',boxShadow:themeShadows[6],height:topBarHeight,'& h5':{marginTop:0,marginBottom:0,marginLeft:'16px',fontWeight:'500'}};});var ProductBox=styled('div')(function(){return{display:'flex',alignItems:'center',padding:'8px 8px',transition:'background 300ms ease','&:hover':{background:'rgba(0,0,0,0.01)'}};});var IMG=styled('img')(function(){return{width:48};});var ProductDetails=styled('div')(function(){return{marginRight:'8',textAlign:'center',flexGrow:1,display:'flex',flexDirection:'column','& h6':{whiteSpace:'nowrap',overflow:'hidden',textOverflow:'ellipsis',display:'block',width:120,marginBottom:'4px'}};});var cartListLoaded=false;function ShoppingCart(_ref3){var container=_ref3.container;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),totalCost=_useState2[0],setTotalCost=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),panelOpen=_useState4[0],setPanelOpen=_useState4[1];var dispatch=useDispatch();var navigate=useNavigate();var _useAuth=useAuth(),user=_useAuth.user;var _useSelector=useSelector(function(state){return state.ecommerce;}),cartList=_useSelector.cartList;var _useSettings=useSettings(),settings=_useSettings.settings;var theme=useTheme();var secondary=theme.palette.text.secondary;if(!cartListLoaded){dispatch(getCartList(user.id));cartListLoaded=true;}var handleDrawerToggle=function handleDrawerToggle(){setPanelOpen(!panelOpen);};var handleCheckoutClick=function handleCheckoutClick(){if(totalCost>0){navigate('/ecommerce/checkout');setPanelOpen(false);}};useEffect(function(){var total=0;cartList.forEach(function(product){total+=product.price*product.amount;});setTotalCost(total);},[cartList]);var _useTheme=useTheme(),palette=_useTheme.palette;var textColor=palette.text.primary;return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(IconButton,{onClick:handleDrawerToggle,children:/*#__PURE__*/_jsx(Badge,{color:\"secondary\",badgeContent:cartList.length,children:/*#__PURE__*/_jsx(Icon,{sx:{color:textColor},children:\"shopping_cart\"})})}),/*#__PURE__*/_jsx(ThemeProvider,{theme:settings.themes[settings.activeTheme],children:/*#__PURE__*/_jsx(Drawer,{container:container,variant:\"temporary\",anchor:'right',open:panelOpen,onClose:handleDrawerToggle,ModalProps:{keepMounted:true},children:/*#__PURE__*/_jsxs(MiniCart,{children:[/*#__PURE__*/_jsxs(CartBox,{children:[/*#__PURE__*/_jsx(Icon,{color:\"primary\",children:\"shopping_cart\"}),/*#__PURE__*/_jsx(\"h5\",{children:\"Cart\"})]}),/*#__PURE__*/_jsx(Box,{flexGrow:1,overflow:\"auto\",children:cartList.map(function(product){return/*#__PURE__*/_jsxs(ProductBox,{children:[/*#__PURE__*/_jsxs(Box,{mr:\"4px\",display:\"flex\",flexDirection:\"column\",children:[/*#__PURE__*/_jsx(StyledIconButton,{size:\"small\",onClick:function onClick(){return dispatch(updateCartAmount(user.id,product.id,product.amount+1));},children:/*#__PURE__*/_jsx(Icon,{sx:{cursor:'pinter'},children:\"keyboard_arrow_up\"})}),/*#__PURE__*/_jsx(StyledIconButton,{disabled:!(product.amount-1),size:\"small\",onClick:function onClick(){return dispatch(updateCartAmount(user.id,product.id,product.amount-1));},children:/*#__PURE__*/_jsx(Icon,{id:!(product.amount-1)&&'disable',children:\"keyboard_arrow_down\"})})]}),/*#__PURE__*/_jsx(Box,{mr:1,children:/*#__PURE__*/_jsx(IMG,{src:product.imgUrl,alt:product.title})}),/*#__PURE__*/_jsxs(ProductDetails,{children:[/*#__PURE__*/_jsx(H6,{children:product.title}),/*#__PURE__*/_jsxs(Small,{sx:{color:secondary},children:[\"$\",product.price,\" x \",product.amount]})]}),/*#__PURE__*/_jsx(StyledIconButton,{size:\"small\",onClick:function onClick(){return dispatch(deleteProductFromCart(user.userId,product.id));},children:/*#__PURE__*/_jsx(Icon,{fontSize:\"small\",children:\"clear\"})})]},product.id);})}),/*#__PURE__*/_jsxs(Button,{sx:{width:'100%',borderRadius:0},variant:\"contained\",color:\"primary\",onClick:handleCheckoutClick,children:[\"Checkout ($\",totalCost.toFixed(2),\")\"]})]})})})]});}export default ShoppingCart;","map":null,"metadata":{},"sourceType":"module"}