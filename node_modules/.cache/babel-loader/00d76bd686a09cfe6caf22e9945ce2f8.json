{"ast":null,"code":"import _regeneratorRuntime from\"/Users/wdelacruz/project_2021/matx-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/wdelacruz/project_2021/matx-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"/Users/wdelacruz/project_2021/matx-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/wdelacruz/project_2021/matx-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Avatar,Box,Divider,Icon,IconButton,styled,TextField,useTheme}from'@mui/material';import{ChatAvatar}from'app/components';import{convertHexToRGB}from'app/utils/utils';import{useCallback,useEffect,useState}from'react';import ScrollBar from'react-perfect-scrollbar';import{H5,H6,Span}from'./Typography';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChatContainer=styled('div')(function(){return{height:'100%',display:'flex',flexDirection:'column',background:'#fff'};});var StyledScrollBar=styled(ScrollBar)(function(){return{flexGrow:1};});var ProfileBox=styled('div')(function(_ref){var theme=_ref.theme;return{display:'flex',alignItems:'center',justifyContent:'space-between',padding:'12px 12px 12px 20px',color:theme.palette.primary.main,background:'#fafafa'};});var ChatStatus=styled('div')(function(_ref2){var theme=_ref2.theme;return{marginLeft:'12px',color:theme.palette.primary.main,'& h5':{marginTop:0,fontSize:'14px',marginBottom:'3px'},'& span':{fontWeight:'500'}};});var ChatMessage=styled('div')(function(_ref3){var theme=_ref3.theme;return{padding:'8px',maxWidth:240,fontSize:'14px',borderRadius:'4px',marginBottom:'8px',whiteSpace:'pre-wrap',wordBreak:'break-word',color:theme.palette.primary.main,background:'#fafafa'};});var MessageTime=styled('span')(function(_ref4){var theme=_ref4.theme;return{fontSize:'13px',fontWeight:'500',color:theme.palette.primary.main};});var ChatImgContainer=styled('div')(function(_ref5){var theme=_ref5.theme;return{padding:'20px',display:'flex',justifyContent:'flex-end'};});var ChatImgBox=styled('div')(function(_ref6){var theme=_ref6.theme;return{padding:'8px',fontSize:'14px',maxWidth:240,borderRadius:'4px',display:'flex',alignItems:'center',justifyContent:'flex-end',color:theme.palette.primary.main,background:'#fafafa'};});var ChatImg=styled('img')(function(){return{width:'40px'};});var ChatImgSize=styled(MessageTime)(function(){return{};});// for previewing bot message\nvar globalMessageList=[];var Chatbox=function Chatbox(_ref7){var togglePopup=_ref7.togglePopup;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isAlive=_useState2[0],setIsAlive=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),messageList=_useState6[0],setMessageList=_useState6[1];var currentUserId='7863a6802ez0e277a0f98534';var chatBottomRef=document.querySelector('#chat-scroll');var sendMessageOnEnter=function sendMessageOnEnter(event){if(event.key==='Enter'&&!event.shiftKey){var tempMessage=message.trim();if(tempMessage!==''){var tempList=_toConsumableArray(messageList);var messageObject={text:tempMessage,contactId:currentUserId};tempList.push(messageObject);globalMessageList.push(messageObject);if(isAlive)setMessageList(tempList);dummyReply();}setMessage('');}};var dummyReply=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setTimeout(function(){var tempList=_toConsumableArray(messageList);var messageObject={text:'Good to hear from you. enjoy!!!',contactId:'opponents contact id',avatar:'/assets/images/faces/13.jpg',name:'Frank Powell'};tempList.push(messageObject);globalMessageList.push(messageObject);if(isAlive)setMessageList(globalMessageList);},2000);case 1:case\"end\":return _context.stop();}}},_callee);}));return function dummyReply(){return _ref8.apply(this,arguments);};}();var scrollToBottom=useCallback(function(){if(chatBottomRef){chatBottomRef.scrollTo({top:chatBottomRef.scrollHeight,behavior:'smooth'});}},[chatBottomRef]);useEffect(function(){if(isAlive){setMessageList([{contactId:'323sa680b3249760ea21rt47',text:'Do you ever find yourself falling into the “discount trap?”',time:'2018-02-10T08:45:28.291Z',id:'323sa680b3249760ea21rt47',name:'Frank Powell',avatar:'/assets/images/faces/13.jpg',status:'online',mood:''},{contactId:'7863a6802ez0e277a0f98534',text:'Giving away your knowledge or product just to gain clients?',time:'2018-02-10T08:45:28.291Z',id:'7863a6802ez0e277a0f98534',name:'John Doe',avatar:'/assets/images/face-1.jpg',status:'online',mood:''},{contactId:'323sa680b3249760ea21rt47',text:'Yes',time:'2018-02-10T08:45:28.291Z',id:'323sa680b3249760ea21rt47',name:'Frank Powell',avatar:'/assets/images/faces/13.jpg',status:'online',mood:''},{contactId:'7863a6802ez0e277a0f98534',text:'Don’t feel bad. It happens to a lot of us',time:'2018-02-10T08:45:28.291Z',id:'7863a6802ez0e277a0f98534',name:'John Doe',avatar:'/assets/images/face-1.jpg',status:'online',mood:''},{contactId:'323sa680b3249760ea21rt47',text:'Do you ever find yourself falling into the “discount trap?”',time:'2018-02-10T08:45:28.291Z',id:'323sa680b3249760ea21rt47',name:'Frank Powell',avatar:'/assets/images/faces/13.jpg',status:'online',mood:''},{contactId:'7863a6802ez0e277a0f98534',text:'Giving away your knowledge or product just to gain clients?',time:'2018-02-10T08:45:28.291Z',id:'7863a6802ez0e277a0f98534',name:'John Doe',avatar:'/assets/images/face-1.jpg',status:'online',mood:''},{contactId:'323sa680b3249760ea21rt47',text:'Yes',time:'2018-02-10T08:45:28.291Z',id:'323sa680b3249760ea21rt47',name:'Frank Powell',avatar:'/assets/images/faces/13.jpg',status:'online',mood:''},{contactId:'7863a6802ez0e277a0f98534',text:'Don’t feel bad. It happens to a lot of us',time:'2018-02-10T08:45:28.291Z',id:'7863a6802ez0e277a0f98534',name:'John Doe',avatar:'/assets/images/face-1.jpg',status:'online',mood:''}]);}// getChatRoomByContactId(currentUserId, \"323sa680b3249760ea21rt47\").then(\n//   ({ data }) => {\n//     if (isAlive) {\n//       setMessageList(data?.messageList);\n//     }\n//   }\n// );\n},[isAlive]);useEffect(function(){scrollToBottom();return function(){return setIsAlive(false);};},[messageList,scrollToBottom]);var _useTheme=useTheme(),palette=_useTheme.palette;var primary=palette.primary.main;var textPrimary=palette.text.primary;return/*#__PURE__*/_jsxs(ChatContainer,{children:[/*#__PURE__*/_jsxs(ProfileBox,{children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(ChatAvatar,{src:\"/assets/images/face-2.jpg\",status:\"online\"}),/*#__PURE__*/_jsxs(ChatStatus,{children:[/*#__PURE__*/_jsx(H5,{children:\"Ryan Todd\"}),/*#__PURE__*/_jsx(Span,{children:\"Active\"})]})]}),/*#__PURE__*/_jsx(IconButton,{onClick:togglePopup,children:/*#__PURE__*/_jsx(Icon,{fontSize:\"small\",children:\"clear\"})})]}),/*#__PURE__*/_jsxs(StyledScrollBar,{id:\"chat-scroll\",children:[messageList.map(function(item,ind){return/*#__PURE__*/_jsxs(Box,{p:\"20px\",display:\"flex\",sx:{justifyContent:currentUserId===item.contactId&&'flex-end'},children:[currentUserId!==item.contactId&&/*#__PURE__*/_jsx(Avatar,{src:item.avatar}),/*#__PURE__*/_jsxs(Box,{ml:\"12px\",children:[currentUserId!==item.contactId&&/*#__PURE__*/_jsx(H5,{sx:{mb:'4px',fontSize:'14px',color:primary},children:item.name}),/*#__PURE__*/_jsx(ChatMessage,{children:item.text}),/*#__PURE__*/_jsx(MessageTime,{children:\"1 minute ago\"})]})]},ind);}),/*#__PURE__*/_jsx(ChatImgContainer,{children:/*#__PURE__*/_jsxs(Box,{ml:\"12px\",children:[/*#__PURE__*/_jsxs(ChatImgBox,{children:[/*#__PURE__*/_jsx(ChatImg,{alt:\"laptop\",src:\"/assets/images/laptop-1.png\"}),/*#__PURE__*/_jsxs(Box,{ml:\"12px\",children:[/*#__PURE__*/_jsx(H6,{sx:{mt:0,mb:'4px'},children:\"Asus K555LA.png\"}),/*#__PURE__*/_jsx(ChatImgSize,{children:\"21.5KB\"})]})]}),/*#__PURE__*/_jsx(MessageTime,{children:\"1 minute ago\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Divider,{sx:{background:\"rgba(\".concat(convertHexToRGB(textPrimary),\", 0.15)\")}}),/*#__PURE__*/_jsx(TextField,{placeholder:\"Type here ...\",multiline:true,rowsMax:4,fullWidth:true,sx:{'& textarea':{color:primary}},InputProps:{endAdornment:/*#__PURE__*/_jsxs(Box,{display:\"flex\",children:[/*#__PURE__*/_jsx(IconButton,{size:\"small\",children:/*#__PURE__*/_jsx(Icon,{children:\"tag_faces\"})}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",children:/*#__PURE__*/_jsx(Icon,{children:\"attachment\"})})]}),classes:{root:'pl-5 pr-3 py-3 text-body'}},value:message,onChange:function onChange(e){return setMessage(e.target.value);},onKeyUp:sendMessageOnEnter})]})]});};export default Chatbox;","map":null,"metadata":{},"sourceType":"module"}