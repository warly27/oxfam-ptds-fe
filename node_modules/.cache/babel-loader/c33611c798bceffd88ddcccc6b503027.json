{"ast":null,"code":"import _regeneratorRuntime from\"/Users/wdelacruz/project_2021/matx-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/wdelacruz/project_2021/matx-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/wdelacruz/project_2021/matx-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/Users/wdelacruz/project_2021/matx-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useEffect,useReducer}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";var reducer=function reducer(state,action){switch(action.type){case'LOAD_NOTIFICATIONS':{return _objectSpread(_objectSpread({},state),{},{notifications:action.payload});}case'DELETE_NOTIFICATION':{return _objectSpread(_objectSpread({},state),{},{notifications:action.payload});}case'CLEAR_NOTIFICATIONS':{return _objectSpread(_objectSpread({},state),{},{notifications:action.payload});}default:{return _objectSpread({},state);}}};var NotificationContext=/*#__PURE__*/createContext({notifications:[],deleteNotification:function deleteNotification(){},clearNotifications:function clearNotifications(){},getNotifications:function getNotifications(){},createNotification:function createNotification(){}});export var NotificationProvider=function NotificationProvider(_ref){var settings=_ref.settings,children=_ref.children;var _useReducer=useReducer(reducer,[]),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var deleteNotification=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(notificationID){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post('/api/notification/delete',{id:notificationID});case 3:res=_context.sent;dispatch({type:'DELETE_NOTIFICATION',payload:res.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function deleteNotification(_x){return _ref2.apply(this,arguments);};}();var clearNotifications=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post('/api/notification/delete-all');case 3:res=_context2.sent;dispatch({type:'CLEAR_NOTIFICATIONS',payload:res.data});_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function clearNotifications(){return _ref3.apply(this,arguments);};}();var getNotifications=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.get('/api/notification');case 3:res=_context3.sent;dispatch({type:'LOAD_NOTIFICATIONS',payload:res.data});_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);console.error(_context3.t0);case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function getNotifications(){return _ref4.apply(this,arguments);};}();var createNotification=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(notification){var res;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.post('/api/notification/add',{notification:notification});case 3:res=_context4.sent;dispatch({type:'CREATE_NOTIFICATION',payload:res.data});_context4.next=10;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);console.error(_context4.t0);case 10:case\"end\":return _context4.stop();}}},_callee4,null,[[0,7]]);}));return function createNotification(_x2){return _ref5.apply(this,arguments);};}();useEffect(function(){getNotifications();},[]);return/*#__PURE__*/_jsx(NotificationContext.Provider,{value:{notifications:state.notifications,deleteNotification:deleteNotification,clearNotifications:clearNotifications,getNotifications:getNotifications,createNotification:createNotification},children:children});};export default NotificationContext;","map":null,"metadata":{},"sourceType":"module"}