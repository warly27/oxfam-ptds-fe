{"ast":null,"code":"import _objectSpread from\"/Users/wdelacruz/project_2021/matx-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/wdelacruz/project_2021/matx-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/wdelacruz/project_2021/matx-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/wdelacruz/project_2021/matx-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// *https://www.registers.service.gov.uk/registers/country/use-the-api*\nimport{Autocomplete,CircularProgress,styled,TextField}from'@mui/material';import fetch from'cross-fetch';import React from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AutoComplete=styled(Autocomplete)(function(){return{width:300};});function sleep(){var delay=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;return new Promise(function(resolve){return setTimeout(resolve,delay);});}export default function AsyncAutocomplete(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),options=_React$useState4[0],setOptions=_React$useState4[1];var loading=open&&options.length===0;React.useEffect(function(){var active=true;if(!loading){return undefined;}_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,countries;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('https://country.register.gov.uk/records.json?page-size=5000');case 2:response=_context.sent;_context.next=5;return sleep(3000);case 5:_context.next=7;return response.json();case 7:countries=_context.sent;if(active){setOptions(Object.keys(countries).map(function(key){return countries[key].item[0];}));}case 9:case\"end\":return _context.stop();}}},_callee);}))();return function(){active=false;};},[loading]);React.useEffect(function(){if(!open){setOptions([]);}},[open]);return/*#__PURE__*/_jsx(AutoComplete,{open:open,options:options,loading:loading,id:\"asynchronous-demo\",onOpen:function onOpen(){return setOpen(true);},onClose:function onClose(){return setOpen(false);},getOptionLabel:function getOptionLabel(option){return option.name;},renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{fullWidth:true,variant:\"outlined\",label:\"Asynchronous\",InputProps:_objectSpread(_objectSpread({},params.InputProps),{},{endAdornment:/*#__PURE__*/_jsxs(React.Fragment,{children:[loading?/*#__PURE__*/_jsx(CircularProgress,{color:\"inherit\",size:20}):null,params.InputProps.endAdornment]})})}));}});}","map":null,"metadata":{},"sourceType":"module"}